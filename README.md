# spring-app

## やりたいこと

- 普通のSpringBootのWEBアプリケーションとして作る
- システム的には、アプリ用のデータベースを使用し、他システムのAPIを呼び出して処理を行うものとする。
- ログインは後回しにする。
- 一覧画面と詳細画面を作る。
- 詳細画面の情報は他システムよりAPIで取得するものとする。
- htmxと、通常のAjaxの使い分けをする。
- ロギングをビジネスロジックに含めない。
- 基本的に全ソースに対してユニットテストを記述する。

## 起動方法

- `./local-env/.env`にMySQLのパスワードとROOTのパスワードを空欄で記述している。  
  - ROOTユーザのパスワードはDockerで使うだけなので、任意の値を記載。
  - 一般ユーザのパスワードは`./src/main/resources/application.yaml`に記載のパスワードを転記。
  - このファイルはコミットしないよう無視するように設定しておく。

## 思想

- DDDでやりたいのでパッケージ構成をDDDらしくする。
- 単方向の依存を実現するために、JIGで作図しながら内容を把握する。
  - この辺、テスト(ArchUnit)でチェックもできるといいな。
- ロギングはビジネスロジックに含めない。
  - 外部APIのリクエストとレスポンスはライブラリを使いたいな。
- htmxはAjaxで細かいデータをHTMLに設定する場合に使用する。
- 普通のJSONをやり取りするAjaxはテーブル表示向けに使用する。
- MapperのテストについてはTestcontainerでやりたかったけど、開発環境に直接Dockerを入れる構成にしなかったので、断念。  
  WSLのUbuntuにDockerを入れて、これに作ったMySQL環境に接続をして試験できるようにする。